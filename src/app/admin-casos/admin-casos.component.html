<header class="seccion1">
    <div><app-admin-menu></app-admin-menu></div>
</header>

<section class="tabla-abogados-container">
    <h1>Casos del Abogado</h1>

    <div *ngIf="!isLoggedIn" class="mensaje-sesion">
        <h1>Debes iniciar sesión primero.</h1>
    </div>

    <div *ngIf="isLoggedIn">
        <!-- Mensaje si no hay casos disponibles -->
        <div *ngIf="noCasosAvailable" class="mensaje-no-casos">
            <h2>No hay casos disponibles.</h2>
        </div>

        <div *ngFor="let caso of casos" class="caso-container">
            <h2>Caso ID: {{ caso.id }}</h2>
            <div class="abogado-info">
                <div class="info-item">
                    <strong>Abogado Encargado:</strong> {{ caso.id_abogado_encargado }}
                </div>
                <div class="info-item">
                    <strong>Identificador del Cliente:</strong> {{ caso.id_cliente }}
                </div>
                <div class="info-item">
                    <strong>Estado del Caso:</strong> {{ caso.estado_caso }}
                </div>
                <div class="info-item">
                    <strong>Descripción del Caso:</strong> {{ caso.descripcion_caso }}
                </div>
                <div class="info-item">
                    <strong>Evidencias:</strong> {{ caso.evidencia }}
                </div>
                <div class="info-item">
                    <strong>Testimonios:</strong> {{ caso.testimonios }}
                </div>
                <div class="info-item">
                    <strong>Se creó:</strong> {{ caso.creado_en }}
                </div>
                <div class="info-item">
                    <strong>Se actualizó:</strong> {{ caso.actualizado_en }}
                </div>
                <div class="info-item">
                    <strong>Rama:</strong> {{ caso.rama_id }}
                </div>
            </div>
        </div>

        <!-- Botón para abrir el formulario de nuevo caso -->
        <button (click)="abrirFormularioCaso()" class="info-item">Crear Nuevo Caso</button>

        <!-- Formulario para crear un nuevo caso -->
        <div *ngIf="formularioVisible" class="formulario-caso">
            <h2>Crear Nuevo Caso</h2>
            <form (ngSubmit)="crearCaso()">
                <!-- ID del Abogado Encargado -->
                <div>
                    <strong>Abogado Encargado:</strong> {{ nuevoCaso.id_abogado_encargado }}
                    <input type="text" id="id_abogado" [(ngModel)]="nuevoCaso.id_abogado_encargado" name="id_abogado" required>
                    

                </div>

                <!-- ID del Cliente -->
                <div>
                    <label for="id_cliente">ID del Cliente:</label>
                    <input type="text" id="id_cliente" [(ngModel)]="nuevoCaso.id_cliente" name="id_cliente" required>
                </div>

                <!-- Estado del Caso -->
                <div>
                    <label for="estado_caso">Estado del Caso:</label>
                    <input type="text" id="estado_caso" [(ngModel)]="nuevoCaso.estado_caso" name="estado_caso" required>
                </div>

                <!-- Descripción del Caso -->
                <div>
                    <label for="descripcion_caso">Descripción del Caso:</label>
                    <textarea id="descripcion_caso" [(ngModel)]="nuevoCaso.descripcion_caso" name="descripcion_caso" required></textarea>
                </div>

                <!-- Evidencias -->
                <div>
                    <label for="evidencia">Evidencias:</label>
                    <textarea id="evidencia" [(ngModel)]="nuevoCaso.evidencia" name="evidencia" required></textarea>
                </div>

                <!-- Testimonios -->
                <div>
                    <label for="testimonios">Testimonios:</label>
                    <textarea id="testimonios" [(ngModel)]="nuevoCaso.testimonios" name="testimonios" required></textarea>
                </div>

                <!-- Rama del Derecho -->
                <div>
                    <label for="rama_id">Rama del Derecho:</label>
                    <input type="text" id="rama_id" [(ngModel)]="nuevoCaso.rama_id" name="rama_id" required>
                </div>

                <!-- Botón para enviar -->
                <button type="submit" class="info-item">Guardar Caso</button>
            </form>
        </div>
    </div>

    <!-- Botón para volver a Admin Principal -->
    <button (click)="volverAdminPrincipal()" class="info-item">Volver a Admin Principal</button>
</section>

<footer>
    <app-footer></app-footer>
</footer>
